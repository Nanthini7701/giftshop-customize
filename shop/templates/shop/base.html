{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GiftShop</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="{% static 'shop/css/about.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/contact.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/blogs.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/enqiry.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/order.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/billing.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/myaccount.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/password.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/logout.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/tracking.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/payment.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/order_detail.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/categories.css' %}">
  <link rel="stylesheet" href="{% static 'shop/css/styles.css' %}">

  <!-- small scoped styles for notification popup (won't affect other files) -->
  <style>
    :root {
      --notif-yellow: #f4c20a;
      --notif-dark: #111;
    }

    /* popup container (hidden by default) */
    .notification-popup {
      position: fixed;
      top: 86px; /* adjust to sit below header */
      right: 24px;
      width: 520px;
      max-width: calc(100% - 40px);
      background: var(--notif-yellow);
      color: var(--notif-dark);
      border-radius: 8px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      z-index: 2000;
      display: none; /* toggled by JS */
      overflow: hidden;
      font-family: inherit;
      border: 1px solid rgba(0,0,0,0.06);
    }

    /* thin top bar with title */
    .notification-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 16px;
      font-weight: 700;
      font-size: 15px;
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }

    .notification-header .title {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .notification-header .title i {
      font-size: 14px;
      background: #fff;
      color: var(--notif-dark);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .notification-close {
      margin-left: auto;
      background: transparent;
      border: 0;
      font-size: 18px;
      cursor: pointer;
      color: rgba(0,0,0,0.8);
      padding: 6px;
    }

    .notification-body {
      padding: 18px 18px;
      font-size: 14px;
      line-height: 1.45;
      color: rgba(0,0,0,0.9);
    }

    .notification-body p { margin: 0 0 12px 0; }

    /* optional action button inside popup */
    .notification-actions {
      display:flex;
      gap:10px;
      padding: 0 18px 18px;
    }
    .notification-actions .btn {
      background: #fff;
      color: var(--notif-dark);
      border-radius: 20px;
      padding: 8px 14px;
      text-decoration: none;
      font-weight: 700;
      box-shadow: 0 2px 0 rgba(0,0,0,0.08);
    }

    /* small caret (pointing to bell) */
    .notification-popup::before {
      content: "";
      position: absolute;
      top: -10px;
      right: 28px;
      width: 18px;
      height: 18px;
      transform: rotate(45deg);
      background: var(--notif-yellow);
      border-top: 1px solid rgba(0,0,0,0.06);
      border-left: 1px solid rgba(0,0,0,0.06);
    }

    /* visible class */
    .notification-popup.visible { display: block; animation: notifIn .18s ease; }

    @keyframes notifIn {
      from { transform: translateY(-6px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* small responsive tweak */
    @media (max-width:600px){
      .notification-popup { right: 12px; left: 12px; width: auto; top: 70px; }
      .notification-popup::before { right: 40px; }
    }
  </style>
</head>

<body>

<header class="site-header">
    <div class="container header-inner">

<nav>
    <div class="nav-left">
      <img src="{% static 'shop/images/logo.png' %}" class="logo logo-glow">

      <div class="nav-menu">
          <a href="{% url 'shop:home' %}" class="active">Home</a>
          <a href="{% url 'shop:categories' %}">Categories</a>
          <a href="{% url 'shop:gallery' %}">Gallery</a>
          <a href="{% url 'shop:blogs' %}">Blogs</a>
          <a href="{% url 'shop:contact' %}">Contact us</a>
          <a href="{% url 'shop:about' %}">About us</a>
      </div>
    </div>

    <div class="nav-icons">

        <!-- PROFILE DROPDOWN FIXED -->
        <div class="profile" id="profileMenu">
            <img src="{% static 'shop/images/pro1.png' %}" class="profile-img">

            <div class="dropdown" id="dropdownMenu">
                <div class="dropdown-title">My Accounts</div>
                <a href="{% url 'shop:myaccount' %}">Account Information</a>
                <a href="{% url 'shop:ordertraking' %}">My order</a>
                <a href="{% url 'shop:traking' %}">Tracking order</a>
                <a href="{% url 'shop:password' %}">Password Manager</a>
                <a href="{% url 'shop:logout' %}">Logout</a>
            </div>
        </div>

        <div class="right">
            <a href="{% url 'shop:wishlist' %}">
                <i class="fa-regular fa-heart"></i>
                <span id="wishlist-count">{{ wishlist_count }}</span>
            </a>

            <a href="{% url 'shop:order' %}">
                <i class="fa-solid fa-cart-shopping"></i>
                <span id="cart-count">{{ cart_count }}</span>
            </a>
        </div>

        <!-- bell icon (click toggles notification popup) -->
        <a href="javascript:void(0)" id="bellIcon" title="Notifications" aria-haspopup="true" aria-expanded="false" style="margin-left:12px;">
            <i class="fa-regular fa-bell"></i>
        </a>

    </div>
</nav>

<!-- SEARCH BAR -->
<form method="GET" action="{% url 'shop:search' %}">
    <div class="search-bar">
        <select name="cat">
            <option value="">All</option>
            {% for c in categories %}
            <option value="{{ c.id }}">{{ c.name }}</option>
            {% endfor %}
        </select>

        <input type="text" name="q" placeholder="Search">
        <i class="fa fa-search" onclick="this.closest('form').submit()"></i>
    </div>
</form>

</div>
</header>

<!-- ===== Notification popup (added) ===== -->
<div id="notificationPopup" class="notification-popup" role="dialog" aria-label="Order and delivery notifications" aria-hidden="true">
  <div class="notification-header">
    <div class="title">
      <i class="fa-solid fa-bell"></i>
      <span>Order/Delivery Notifications</span>
    </div>
    <button id="notifClose" class="notification-close" aria-label="Close notifications">&times;</button>
  </div>

  <div class="notification-body">
    <p><strong>We offer fast and reliable delivery</strong> to ensure your gifts arrive fresh, on time, and beautifully packaged. Choose from standard, express, or same-day delivery options at checkout.</p>

    <!-- small example single notification entry (you can loop actual notifications later) -->
    <div class="notif-item" style="display:flex; gap:12px; align-items:flex-start; margin-top:10px;">
      <img src="{% static 'shop/images/product-frame.jpg' %}" alt="product" style="width:56px;height:56px;object-fit:cover;border-radius:4px;border:1px solid rgba(0,0,0,0.06)">
      <div style="flex:1;">
        <div style="font-weight:700; margin-bottom:6px;">Your order #SJKD456FH is dispatched</div>
        <div style="font-size:13px;color:rgba(0,0,0,0.7)">Expected delivery: <strong>28 June 2025</strong></div>
      </div>
    </div>
  </div>

  <div class="notification-actions">
    <a href="{% url 'shop:ordertraking' %}" class="btn">View Orders</a>
    <a href="{% url 'shop:contact' %}" class="btn">Contact Support</a>
  </div>
</div>
<!-- ===== end notification popup ===== -->

  <main>
    {% block content %}{% endblock %}
  </main>

 
<!--Footer-->
<footer class="site-footer">
  <div class="footer-top container">
    <div class="footer-col footer-brand">
      
      <!-- Django STATIC logo -->
      <img id="footerLogo" src="{% static 'shop/images/logo.png' %}"
           alt="VibeyGifty Logo" class="footer-logo" />
           
      <p class="brand-sub">VibeyGifty</p>
    </div>

    <div class="footer-col">
      <h4>Customer service</h4>
      <ul>
        <li><a href="#">My Account</a></li>
        <li><a href="#">Checkup</a></li>
        <li><a href="#">FAQ</a></li>
        <li><a href="#">Return</a></li>
      </ul>
    </div>

    <div class="footer-col">
      <h4>Company</h4>
      <ul>
        <li><a href="#">About us</a></li>
        <li><a href="#">Blogs</a></li>
        <li><a href="#">Contact us</a></li>
        <li><a href="#">Career</a></li>
      </ul>
    </div>

    <div class="footer-col">
      <h4>Our information</h4>
      <ul>
        <li><a href="#">Privacy</a></li>
        <li><a href="#">Terms & Condition</a></li>
        <li><a href="#">Customer Feedback</a></li>
      </ul>
    </div>

    <div class="footer-col footer-contact">
      <h4>Contact</h4>
      <p>Mobile: 123-456-789</p>
      <p>Email: vibeygif@gmail.com</p>
      <p>Address: 12, north city-001</p>

      <div class="socials">
        <a href="#" aria-label="WhatsApp">WA</a>
        <a href="#" aria-label="Facebook">FB</a>
        <a href="#" aria-label="Instagram">IG</a>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <div class="container footer-bottom-inner">
      <p>© 2025 VibeyGifty, All rights reserved.</p>
      <nav class="footer-links">
        <a href="#">Terms & Conditions</a> · 
        <a href="#">Privacy Policy</a>
      </nav>
    </div>
  </div>
</footer>

<script>
/* notification popup toggle script (scoped) */
(function(){
  const bell = document.getElementById('bellIcon');
  const popup = document.getElementById('notificationPopup');
  const closeBtn = document.getElementById('notifClose');

  function showPopup() {
    popup.classList.add('visible');
    popup.setAttribute('aria-hidden','false');
    bell.setAttribute('aria-expanded','true');
  }

  function hidePopup() {
    popup.classList.remove('visible');
    popup.setAttribute('aria-hidden','true');
    bell.setAttribute('aria-expanded','false');
  }

  // toggle on bell click
  bell.addEventListener('click', function(e){
    e.stopPropagation();
    if (popup.classList.contains('visible')) hidePopup();
    else showPopup();
  });

  // close button
  closeBtn.addEventListener('click', function(e){
    e.stopPropagation();
    hidePopup();
  });

  // click outside to close
  document.addEventListener('click', function(e){
    if (!popup.contains(e.target) && e.target !== bell && !bell.contains(e.target)) {
      hidePopup();
    }
  });

  // ESC key to close
  document.addEventListener('keydown', function(e){
    if (e.key === "Escape") hidePopup();
  });

  // keep popup positioned if window resizes (optional)
  window.addEventListener('resize', function(){
    // nothing needed by default; reserved for future positioning
  });
})();
</script>

</body>
</html>
